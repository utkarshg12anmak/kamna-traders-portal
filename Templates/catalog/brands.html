{# templates/Catalog/brands.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Catalog Items{% endblock %}

{% block extra_head %}
{# page-specific favicons, scripts, etc. #}
<link
rel="icon"
href="{% static 'favicon_dark.svg' %}"
type="image/svg+xml"
media="(prefers-color-scheme: light)"
/>
<link
rel="icon"
href="{% static 'favicon_light.svg' %}"
type="image/svg+xml"
media="(prefers-color-scheme: dark)"
/>
{% endblock %}

{% block content %}

<style>
    /* Add a subtle animation for the modal */
    .modal-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.4);
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0; /* Start hidden for animation */
        transition: opacity 0.3s ease-in-out;
    }

    .modal-overlay.active {
        display: flex;
        opacity: 1; /* Fade in */
    }

    .modal-box {
        background: white;
        padding: 2rem; /* Increased padding */
        border-radius: .75rem; /* Slightly more rounded corners */
        box-shadow: 0 10px 30px rgba(0,0,0,0.2); /* Stronger, more diffused shadow */
        max-width: 450px; /* Slightly wider modal */
        width: 90%;
        position: relative;
        transform: translateY(-20px); /* Start slightly above center for animation */
        transition: transform 0.3s ease-in-out;
    }

    .modal-overlay.active .modal-box {
        transform: translateY(0); /* Slide into place */
    }

    .modal-box .close-btn {
        position: absolute;
        top: 1rem; /* Adjusted position */
        right: 1rem; /* Adjusted position */
        font-size: 1.75rem; /* Larger close button */
        cursor: pointer;
        color: #888; /* Softer color */
        transition: color 0.2s ease;
    }

    .modal-box .close-btn:hover {
        color: #333; /* Darker on hover */
    }

    /* Modal header styles */
    .modal-box h3 {
        font-size: 1.8rem; /* Larger title */
        margin-bottom: 1.5rem; /* More space below title */
        color: #333; /* Darker text */
        text-align: center; /* Centered title */
        font-weight: 600; /* Slightly bolder */
    }

    /* Form specific styles */
    .modal-box form label {
        display: block; /* Ensure label is on its own line */
        margin-bottom: 0.5rem; /* Space below label */
        font-weight: 500; /* Slightly bolder label */
        color: #555;
    }

    .modal-box form input[type="text"] {
        width: calc(100% - 20px); /* Account for padding */
        padding: 0.75rem 1rem; /* More padding in input field */
        margin-bottom: 1.5rem; /* Space below input field */
        border: 1px solid #ccc; /* Subtle border */
        border-radius: 0.375rem; /* Rounded input field */
        font-size: 1rem;
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }

    .modal-box form input[type="text"]:focus {
        border-color: #007bff; /* Highlight on focus */
        outline: none; /* Remove default outline */
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Subtle glow on focus */
    }

    /* Button container */
    .modal-box div[style="margin-top:1rem; text-align:right;"] {
        margin-top: 2rem !important; /* More space above buttons */
        display: flex; /* Use flexbox for button alignment */
        justify-content: flex-end; /* Align buttons to the right */
        gap: 0.75rem; /* Space between buttons */
    }

    /* Base button styles (assuming you have btn-secondary and btn-primary classes defined elsewhere) */
    .btn-secondary {
        padding: 0.75rem 1.5rem;
        border-radius: 0.375rem;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
        transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    }

    .btn-primary {
        padding: 0.75rem 1.5rem;
        border-radius: 0.375rem;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 500;
        transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
    }

    /* Specific button colors (adjust as per your existing design) */
    .btn-secondary {
        background-color: #f0f0f0;
        color: #333;
        border: 1px solid #ddd;
    }
    .btn-secondary:hover {
        background-color: #e0e0e0;
        border-color: #ccc;
    }

    .btn-primary {
        background-color: #007bff;
        color: white;
        border: 1px solid #007bff;
    }
    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #0056b3;
    }
</style>

<section class="main-content">
    
    <!-- 2a) PAGE HEADER: Title + Record count + Buttons -->
    <div class="page-header">
        <h1 class="page-title">
            Manage Brands
            <small class="page-subtitle"> &nbsp; ({{ object_list|length }} Records)</small>
        </h1>
        <div class="action-buttons">                    


{% include "components/button-plus.html" with text="Brands" type="button" id="openBrandModal" class="ml-2" color="#3aa856" dark_color="#34974d"%}



</div>
</div>

<!-- 2b) FILTERS -->
<div class="filters">
    <p>Filters go here</p>
</div>

<!-- 2c) TABLES -->
<div class="tables">
    <p>Tables go here</p>
</div>

</section>
  <!-- Modal Overlay -->
  <div id="brandModal" class="modal-overlay">
    <div class="modal-box">
      <span id="closeBrandModal" class="close-btn">&times;</span>
      <h3>New Brand</h3>
      <form id="brandForm" method="post" action="{% url 'catalog:catalog-brands' %}">
        {% csrf_token %}
        {{ form.name.label_tag }}<br/>
        {{ form.name }}<br/>
        <div style="margin-top:1rem; text-align:right;">
          <button type="button" id="cancelBrand" class="btn-secondary">Cancel</button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const openBtn  = document.getElementById('openBrandModal');
  const modal    = document.getElementById('brandModal');
  const closeBtn = document.getElementById('closeBrandModal');
  const cancelBtn= document.getElementById('cancelBrand');

  if (!openBtn || !modal) return;  // safety check

  openBtn.addEventListener('click', () => modal.classList.add('active'));
  [closeBtn, cancelBtn].forEach(btn =>
    btn.addEventListener('click', () => modal.classList.remove('active'))
  );
});
</script>



{% endblock %}
