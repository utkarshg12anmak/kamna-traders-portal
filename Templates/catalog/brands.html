{# templates/Catalog/brands.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Catalog Items{% endblock %}

{% block extra_head %}
{# page-specific favicons, scripts, etc. #}
<link
rel="icon"
href="{% static 'favicon_dark.svg' %}"
type="image/svg+xml"
media="(prefers-color-scheme: light)"
/>
<link
rel="icon"
href="{% static 'favicon_light.svg' %}"
type="image/svg+xml"
media="(prefers-color-scheme: dark)"
/>
{% endblock %}

{% block content %}


<section class="main-content">
    
    <!-- 2a) PAGE HEADER: Title + Record count + Buttons -->
    <div class="page-header">
        <h1 class="page-title">
            Manage Brands
            <small class="page-subtitle"> &nbsp; ({{ object_list|length }} Records)</small>
        </h1>
        <div class="action-buttons">                    


{% include "components/button-plus.html" with text="Brands" type="button" data_toggle="modal" data_target="#brandModal" class="ml-2" color="#3aa856" dark_color="#34974d"%}

  <div class="modal fade" id="brandModal" tabindex="-1" aria-labelledby="brandModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <form id="brandForm" method="post" action="{% url 'catalog:catalog-brands' %}">
          {% csrf_token %}
          <div class="modal-header">
            <h5 class="modal-title" id="brandModalLabel">New Brand</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
          </div>
          <div class="modal-body">
            {{ form.name.label_tag }}
            {{ form.name }}
            <div class="invalid-feedback" id="name-error"></div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
              Cancel
            </button>
            <button type="submit" class="btn btn-primary" id="brand-save-btn">
              Save
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

</div>
</div>

<!-- 2b) FILTERS -->
<div class="filters">
    <p>Filters go here</p>
</div>

<!-- 2c) TABLES -->
<div class="tables">
    <p>Tables go here</p>
</div>

</section>

<script>
  // Clear old errors when modal opens
  document.getElementById('brandModal')
    .addEventListener('show.bs.modal', () => {
      document.getElementById('name-error').textContent = '';
      document.querySelector('#brandForm input').classList.remove('is-invalid');
    });

  // (Later) Hook AJAX here â€“ for now, native form submit works
</script>



{% endblock %}
