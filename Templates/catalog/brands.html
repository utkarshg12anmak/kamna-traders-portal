{# templates/Catalog/brands.html #}
{% extends "base.html" %}
{% load static %}

{% block title %}Catalog Items{% endblock %}

{% block extra_head %}
{# page-specific favicons, scripts, etc. #}
<link
rel="icon"
href="{% static 'favicon_dark.svg' %}"
type="image/svg+xml"
media="(prefers-color-scheme: light)"
/>
<link
rel="icon"
href="{% static 'favicon_light.svg' %}"
type="image/svg+xml"
media="(prefers-color-scheme: dark)"
/>
{% endblock %}

{% block content %}

<style>
    /* modal overlay sits over the entire screen, hidden by default */
.modal-overlay {
  display: none;
  position: fixed;
  inset: 0;                      /* top/right/bottom/left: 0 */
  background: rgba(0,0,0,0.4);   /* semi-dark backdrop */
  align-items: center;
  justify-content: center;
  z-index: 1000;                 /* above everything else */
}

/* when active, show as flex container */
.modal-overlay.active {
  display: flex;
}

/* the dialog box */
.modal-box {
  background: white;
  padding: 1.5rem;
  border-radius: .5rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  max-width: 400px;
  width: 90%;
  position: relative;
}

/* close “×” in top-right */
.modal-box .close-btn {
  position: absolute;
  top: .5rem;
  right: .5rem;
  font-size: 1.25rem;
  cursor: pointer;
}

</style>

<section class="main-content">
    
    <!-- 2a) PAGE HEADER: Title + Record count + Buttons -->
    <div class="page-header">
        <h1 class="page-title">
            Manage Brands
            <small class="page-subtitle"> &nbsp; ({{ object_list|length }} Records)</small>
        </h1>
        <div class="action-buttons">                    


{% include "components/button-plus.html" with text="Brands" type="button" id="openBrandModal" class="ml-2" color="#3aa856" dark_color="#34974d"%}



</div>
</div>

<!-- 2b) FILTERS -->
<div class="filters">
    <p>Filters go here</p>
</div>

<!-- 2c) TABLES -->
<div class="tables">
    <p>Tables go here</p>
</div>

</section>
  <!-- Modal Overlay -->
  <div id="brandModal" class="modal-overlay">
    <div class="modal-box">
      <span id="closeBrandModal" class="close-btn">&times;</span>
      <h3>New Brand</h3>
      <form id="brandForm" method="post" action="{% url 'catalog:catalog-brands' %}">
        {% csrf_token %}
        {{ form.name.label_tag }}<br/>
        {{ form.name }}<br/>
        <div style="margin-top:1rem; text-align:right;">
          <button type="button" id="cancelBrand" class="btn-secondary">Cancel</button>
          <button type="submit" class="btn-primary">Save</button>
        </div>
      </form>
    </div>
  </div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const openBtn  = document.getElementById('openBrandModal');
  const modal    = document.getElementById('brandModal');
  const closeBtn = document.getElementById('closeBrandModal');
  const cancelBtn= document.getElementById('cancelBrand');

  if (!openBtn || !modal) return;  // safety check

  openBtn.addEventListener('click', () => modal.classList.add('active'));
  [closeBtn, cancelBtn].forEach(btn =>
    btn.addEventListener('click', () => modal.classList.remove('active'))
  );
});
</script>



{% endblock %}
