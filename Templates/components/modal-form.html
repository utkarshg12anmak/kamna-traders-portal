{# components/modal-form.html #}

<style> 
    .modal-footer {
        display: flex;
        justify-content: space-between;
    }
 
    /* Add a subtle animation for the modal */
    .modal-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.4);
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0; /* Start hidden for animation */
        transition: opacity 0.3s ease-in-out;
    }

    .modal-overlay.active {
        display: flex;
        opacity: 1; /* Fade in */
    }

    .modal-box {
        background: white;
        padding: 2rem; /* Increased padding */
        border-radius: .75rem; /* Slightly more rounded corners */
        box-shadow: 0 10px 30px rgba(0,0,0,0.2); /* Stronger, more diffused shadow */
        max-width: 450px; /* Slightly wider modal */
        width: 90%;
        position: relative;
        transform: translateY(-20px); /* Start slightly above center for animation */
        transition: transform 0.3s ease-in-out;
    }

    .modal-overlay.active .modal-box {
        transform: translateY(0); /* Slide into place */
    }

    .modal-box .close-btn {
        position: absolute;
        top: 1rem; /* Adjusted position */
        right: 1rem; /* Adjusted position */
        font-size: 1.75rem; /* Larger close button */
        cursor: pointer;
        color: #888; /* Softer color */
        transition: color 0.2s ease;
    }

    .modal-box .close-btn:hover {
        color: red; /* Darker on hover */
    }

    /* Modal header styles */
    .modal-box h3 {
        font-size: 1.8rem; /* Larger title */
        margin-bottom: 1.5rem; /* More space below title */
        color: #333; /* Darker text */
        text-align: center; /* Centered title */
        font-weight: 600; /* Slightly bolder */
    }

    /* Form specific styles */
    .modal-box form label {
        display: block; /* Ensure label is on its own line */
        margin-bottom: 0.5rem; /* Space below label */
        font-weight: 500; /* Slightly bolder label */
        color: #555;
    }

    .modal-box form input[type="text"] {
        width: calc(100% - 20px); /* Account for padding */
        padding: 0.75rem 1rem; /* More padding in input field */
        margin-bottom: 1.5rem; /* Space below input field */
        border: 1px solid #ccc; /* Subtle border */
        border-radius: 0.375rem; /* Rounded input field */
        font-size: 1rem;
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }

    .modal-box form input[type="text"]:focus {
        border-color: #007bff; /* Highlight on focus */
        outline: none; /* Remove default outline */
        box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25); /* Subtle glow on focus */
    }

    /* Button container */
    .modal-box div[style="margin-top:1rem; text-align:right;"] {
        margin-top: 2rem !important; /* More space above buttons */
        display: flex; /* Use flexbox for button alignment */
        justify-content: flex-end; /* Align buttons to the right */
        gap: 0.75rem; /* Space between buttons */
    }

.modal-body {
  display: flex;
  flex-direction: column; /* still stack groups vertically */
  gap: 1rem;
}

/* turn each label+input group into a row */
.modal-body .form-group {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

/* fix label width and remove its bottom margin */
.modal-body .form-group label {
  flex: 0 0 30%;     /* 30% of the row for the label */
  margin-bottom: 0;  /* cancel the default bottom margin */
  white-space: nowrap;
}

/* let the input fill the rest */
.modal-body .form-group input,
.modal-body .form-group select,
.modal-body .form-group textarea {
  flex: 1;
  width: auto;       /* override any 100% you had before */
}



    
</style>

<div id="{{ modal_id }}" class="modal-overlay">
    <div class="modal-box">
        
        
        <span class="close-btn" data-close="{{ modal_id }}">&times;</span> 
        
        
        <h3>{{ title }}</h3>
        <form id="{{ form_id }}"
        method="post"
        action="{{ action_url }}"
        class="modal-form">
        {% csrf_token %}
        
        <div class="modal-body">
        {% for field in form %}
            <div class="form-group">
            {{ field.label_tag }}
            {{ field }}
            <div class="invalid-feedback" id="{{ field.name }}-error"></div>
            </div>
        {% endfor %}
        </div>
        
        <div class="modal-footer">                               
            {% include "components/button-close.html" with text="Cancel" data_close=modal_id %}

            {% include "components/button-save.html" with text="Save" type="submit" %}
        </div>
    </form>
</div>
</div>
